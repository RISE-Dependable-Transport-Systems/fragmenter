faithfulness,answer_relevancy,context_recall,context_precision,response,retrieved_contexts
1.0,0.9261800292310717,1.0,0.99999999995,"The vehicle server communicates by publishing vehicle telemetry, receiving mission commands, handling flight mode changes, and processing manual control inputs over the MAVLink protocol. It establishes a UDP connection to the control tower (ground station) at a specified address and port. Additionally, it implements MAVLink server functionality using the MAVSDK library and creates server plugins that implement MAVLink protocol services.","[""# Source: https://deepwiki.com/RISE-Dependable-Transport-Systems/WayWise/2.1-vehicle-server\n\nThe Vehicle Server subsystem enables WayWise to operate as an onboard MAVLink autopilot. When running on a vehicle's onboard computer, `MavsdkVehicleServer`\n\npublishes vehicle telemetry, receives mission commands, handles flight mode changes, and processes manual control inputs over MAVLink protocol. This allows ground control stations (GCS) to monitor and command the vehicle as if it were a standard MAVLink autopilot.\n\nFor information about connecting to remote MAVLink vehicles from a ground station, see Vehicle Connection. For ground station discovery and management of multiple vehicles, see MAVLink Station.\n\n**Sources:** communication/mavsdkvehicleserver.h1-71 communication/mavsdkvehicleserver.cpp1-841 communication/vehicleserver.h1-64\n\n`MavsdkVehicleServer`\n\ninherits from the abstract `VehicleServer`\n\nbase class and implements MAVLink server functionality using the MAVSDK library. It operates as an autopilot component (MAV_COMP_ID_AUTOPILOT1) with system ID determined by the associated `VehicleState`\n\n.\n\n**Sources:** communication/mavsdkvehicleserver.h24-71 communication/mavsdkvehicleserver.cpp15-82\n\nThe constructor communication/mavsdkvehicleserver.cpp15-82 initializes the MAVSDK instance with autopilot component type and configures it to always send heartbeats:\n\n| Configuration Parameter | Value | Purpose |\n|---|---|---|\n| Component Type | `mavsdk::Mavsdk::ComponentType::Autopilot` | Identifies as autopilot |\n| System ID | `mVehicleState->getId()` | Unique vehicle identifier |\n| Always Send Heartbeats | `true` | Continuous connection monitoring |\n\nThe server establishes a UDP connection to the control tower (ground station) at the specified address and port communication/mavsdkvehicleserver.cpp466-481\n\n**Sources:** communication/mavsdkvehicleserver.cpp23-26 communication/mavsdkvehicleserver.cpp466-481\n\nThe system creates four server plugins that implement MAVLink protocol services:\n\nThe `ActionServer`\n\nis configured to allow manual and auto modes, enable arming, but disable takeoff commands (ground vehicle operation) communication/mavsdkvehicleserver.cpp43-46\n\n**Sources:** communication/mavsdkvehicleserver.cpp34-46\n\nA safety mechanism monitors incoming heartbeat messages and automatically stops the vehicle if no heartbeat is received within 2 seconds:\n\nWhen heartbeat times out communication/mavsdkvehicleserver.cpp492-504:\n\n`mWaypointFollower->stop()`\n\nis called if active`mMovementController`\n\nsets desired steering and speed to zero**Sources:** communication/mavsdkvehicleserver.cpp141-155 communication/mavsdkvehicleserver.cpp492-510 communication/vehicleserver.h53-58\n\nThe system publishes telemetry at 10 Hz (100ms interval) communication/mavsdkvehicleserver.cpp464 via a QTimer."", '/*\n *     Copyright 2022 Marvin Damschen   marvin.damschen@ri.se\n *               2022 Rickard Häll      rickard.hall@ri.se\n *     Published under GPLv3: https://www.gnu.org/licenses/gpl-3.0.html\n */\n\n#include ""mavsdkvehicleserver.h""\n#include <QDebug>\n#include <QMetaMethod>\n#include <future>\n#include <algorithm>\n#include <chrono>\n#include ""logger/logger.h""\n#include ""communication/parameterserver.h""\n\nMavsdkVehicleServer::MavsdkVehicleServer(QSharedPointer<VehicleState> vehicleState, const QHostAddress controlTowerAddress, const unsigned controlTowerPort, const QAbstractSocket::SocketType controlTowerSocketType) :\n    VehicleServer(vehicleState)\n{\n    connect(&Logger::getInstance(), &Logger::logSent, this, &MavsdkVehicleServer::on_logSent);\n\n    mVehicleState = vehicleState;\n    mSystemId = mVehicleState->getId();\n\n    mavsdk::Mavsdk::Configuration config = mavsdk::Mavsdk::Configuration{mavsdk::Mavsdk::ComponentType::Autopilot};\n    config.set_always_send_heartbeats(true);\n    config.set_system_id(mSystemId);\n    mMavsdk.reset(new mavsdk::Mavsdk{config});\n\n//    mavsdk::Mavsdk::Configuration customConfig = mavsdk::Mavsdk::Configuration{mavsdk::Mavsdk::ComponentType::Custom};\n//    customConfig.set_system_id(mVehicleState->getId());\n//    customConfig.set_always_send_heartbeats(true);\n//    customConfig.set_component_id(100); // Should be 100 for camera\n//    mMavsdk->set_configuration(customConfig);\n\n    std::shared_ptr<mavsdk::ServerComponent> serverComponent = mMavsdk->server_component_by_type(mavsdk::Mavsdk::ComponentType::Autopilot);\n\n    // Create server plugins\n    MavlinkParameterServer::initialize(serverComponent);\n    mParameterServer = MavlinkParameterServer::getInstance();\n    mTelemetryServer.reset(new mavsdk::TelemetryServer(serverComponent));\n    mActionServer.reset(new mavsdk::ActionServer(serverComponent));\n    mMissionRawServer.reset(new mavsdk::MissionRawServer(serverComponent));\n\n    // Allow the vehicle to change to auto mode (manual is always allowed) and arm, disable takeoff (only rover support for now)\n    mActionServer->set_allowable_flight_modes({true, true, false});\n    mActionServer->set_armable(true, true);\n    mActionServer->set_allow_takeoff(false);\n\n    // Publish vehicleState\'s telemetry info\n    connect(&mPublishMavlinkTimer, &QTimer::timeout, [this](){\n        mavsdk::TelemetryServer::PositionVelocityNed positionVelocityNed{{static_cast<float>(mVehicleState->getPosition(PosType::fused).getY()),\n                                                                          static_cast<float>(mVehicleState->getPosition(PosType::fused).getX()),\n                                                                          static_cast<float>(-mVehicleState->getPosition(PosType::fused).getHeight())},\n                                                                         {static_cast<float>(mVehicleState->getVelocity().y),\n                                                                          static_cast<float>(mVehicleState->getVelocity().x),\n                                                                          static_cast<float>(-mVehicleState->getVelocity().z)}};\n\n        mavsdk::TelemetryServer::VelocityNed velocity{static_cast<float>(mVehicleState->getVelocity().y),\n                                                      static_cast<float>(mVehicleState->getVelocity().x),\n                                                      static_cast<float>(-mVehicleState->getVelocity().z)};\n\n        mavsdk::TelemetryServer::Heading heading{coordinateTransforms::yawENUtoNED(mVehicleState->getPosition(PosType::fused).getYaw())};\n\n        mavsdk::TelemetryServer::Position homePositionLlh{};\n        mavsdk::TelemetryServer::Position positionLlh{};\n\n        if (!mGNSSReceiver.isNull()) {\n            // publish gpsOrigin\n            sendGpsOriginLlh(mGNSSReceiver->getEnuRef());\n\n            //TODO: homePositionLlh should not be EnuRef\n            homePositionLlh = {mGNSSReceiver->getEnuRef().latitude, mGNSSReceiver->getEnuRef().longitude, static_cast<float>(mGNSSReceiver->getEnuRef().height), 0};']"
1.0,0.9999994787310783,0.0,0.99999999995,The purpose of the WayWise system is to enable research and prototyping of autonomous vehicle systems by implementing a multi-vehicle autonomous navigation system with a three-tier architecture that supports ground vehicles and aerial drones through MAVLink communication.,"['# Source: https://deepwiki.com/RISE-Dependable-Transport-Systems/WayWise/1-overview\n\nWayWise is a multi-vehicle autonomous navigation system developed by RISE Research Institutes of Sweden AB. The system implements a three-tier architecture supporting both ground vehicles (cars, articulated truck-trailer combinations) and aerial drones via MAVLink communication.\n\nWayWise enables research and prototyping of autonomous vehicle systems through:\n\n`CarState`\n\n(Ackermann steering), `TruckState`\n\n(articulated trucks), `TrailerState`\n\n(passive trailers), `CopterState`\n\n(quadcopters)`PurepursuitWaypointFollower`\n\nfor path following, `FollowPoint`\n\nfor dynamic target tracking`UbloxRover`\n\n), camera gimbals, sensor fusion (ZED-F9R ESF)The system operates in dual deployment modes:\n\n`MavsdkVehicleServer`\n\nruns onboard as MAVLink autopilot component`MavsdkStation`\n\ndiscovers vehicles, `MavsdkVehicleConnection`\n\ncontrols them remotelyThis architecture allows autonomous navigation logic (`PurepursuitWaypointFollower`\n\n) to execute either locally on vehicles or remotely in control tower applications.\n\n**Tier 1: Ground Station / Control Tower**\n\n`MavsdkStation`\n\n- Vehicle discovery and connection management`VehicleConnection`\n\n- Abstract interface, implemented by `MavsdkVehicleConnection`\n\n`ParameterServer`\n\n- Configuration management for vehicles`MapWidget`\n\n, `DriveUI`\n\n, `FlyUI`\n\n, `PlanUI`\n\n, `CameraGimbalUI`\n\n**Tier 2: Communication Layer**\n\n`MavsdkVehicleConnection`\n\n- Client-side interface using `mavsdk::Telemetry`\n\n, `mavsdk::Action`\n\n, `mavsdk::Param`\n\n, `mavsdk::MissionRaw`\n\n`MavsdkVehicleServer`\n\n- Server-side autopilot using `mavsdk::TelemetryServer`\n\n, `mavsdk::ActionServer`\n\n, `mavsdk::MissionRawServer`\n\n**Tier 3: On-Vehicle Systems**\n\n`VehicleState`\n\nhierarchy - Multi-source position tracking (`PosType::fused`\n\n, `PosType::GNSS`\n\n, `PosType::odom`\n\n)`WaypointFollower`\n\nimplementations - `PurepursuitWaypointFollower`\n\n, `GotoWaypointFollower`\n\n, `MultiWaypointFollower`\n\n`MovementController`\n\n- Direct actuator control (motor, servo)`UbloxRover`\n\n- RTK GNSS with sensor fusion (ZED-F9R)WayWise prioritizes research flexibility. The API evolves continuously to support functional safety and cybersecurity research.\n\nSources: communication/mavsdkvehicleserver.h24-69 communication/vehicleconnections/mavsdkvehicleconnection.h32-114 autopilot/purepursuitwaypointfollower.h42-127 vehicles/vehiclestate.h25-148\n\nWayWise implements a three-tier architecture with dual deployment modes:\n\n**Tier 1: Ground Station (Control Tower Applications)**\n\n**Tier 2: Communication Layer (MAVLink Protocol)**\n\n`mavsdk::Telemetry`\n\n, `mavsdk::Action`\n\n, `mavsdk::Param`\n\n, `mavsdk::MissionRaw`\n\n, `mavsdk::Offboard`\n\n`mavsdk::TelemetryServer`\n\n, `mavsdk::ActionServer`\n\n, `mavsdk::MissionRawServer`\n\n`NAMED_VALUE_FLOAT`\n\n, `POSITION_TARGET_LOCAL_NED`\n\n, `GPS_RTCM_DATA`\n\n**Tier 3: On-Vehicle Systems**\n\n`WaypointFollower`\n\nimplementations`MovementController`\n\n**Mission Upload Sequence** (`appendToRouteOnVehicle`\n\n→ `addRoute`\n\n):\n\nSources: communication/mavsdkvehicleserver.cpp15-124 communication/vehicleconnections/mavsdkvehicleconnection.cpp9-291 autopilot/purepursuitwaypointfollower.cpp88-148\n\n**Position and Control Loop** (autonomous operation):\n\nSources: communication/mavsdkvehicleserver.cpp49-81 autopilot/purepursuitwaypointfollower.cpp183-411 vehicles/vehiclestate.cpp119-133\n\nWayWise organizes code into subsystem directories:\n\n| Directory | Purpose | Key Files |\n|---|---|---|\n`/core` | Data structures and coordinate systems | `pospoint.h/cpp` , `coordinatetransforms.h/cpp` , `geometry.h/cpp` |\n`/communication` | MAVLink and protocol handling | `mavsdkvehicleserver.h/cpp` , `mavsdkvehicleconnection.h/cpp` , `mavsdkstation.h/cpp` , `parameterserver.', '# Source: https://deepwiki.com/RISE-Dependable-Transport-Systems/WayWise\n\nWayWise is a multi-vehicle autonomous navigation system developed by RISE Research Institutes of Sweden AB. The system implements a three-tier architecture supporting both ground vehicles (cars, articulated truck-trailer combinations) and aerial drones via MAVLink communication.\n\nWayWise enables research and prototyping of autonomous vehicle systems through:\n\n`CarState`\n\n(Ackermann steering), `TruckState`\n\n(articulated trucks), `TrailerState`\n\n(passive trailers), `CopterState`\n\n(quadcopters)`PurepursuitWaypointFollower`\n\nfor path following, `FollowPoint`\n\nfor dynamic target tracking`UbloxRover`\n\n), camera gimbals, sensor fusion (ZED-F9R ESF)The system operates in dual deployment modes:\n\n`MavsdkVehicleServer`\n\nruns onboard as MAVLink autopilot component`MavsdkStation`\n\ndiscovers vehicles, `MavsdkVehicleConnection`\n\ncontrols them remotelyThis architecture allows autonomous navigation logic (`PurepursuitWaypointFollower`\n\n) to execute either locally on vehicles or remotely in control tower applications.\n\n**Tier 1: Ground Station / Control Tower**\n\n`MavsdkStation`\n\n- Vehicle discovery and connection management`VehicleConnection`\n\n- Abstract interface, implemented by `MavsdkVehicleConnection`\n\n`ParameterServer`\n\n- Configuration management for vehicles`MapWidget`\n\n, `DriveUI`\n\n, `FlyUI`\n\n, `PlanUI`\n\n, `CameraGimbalUI`\n\n**Tier 2: Communication Layer**\n\n`MavsdkVehicleConnection`\n\n- Client-side interface using `mavsdk::Telemetry`\n\n, `mavsdk::Action`\n\n, `mavsdk::Param`\n\n, `mavsdk::MissionRaw`\n\n`MavsdkVehicleServer`\n\n- Server-side autopilot using `mavsdk::TelemetryServer`\n\n, `mavsdk::ActionServer`\n\n, `mavsdk::MissionRawServer`\n\n**Tier 3: On-Vehicle Systems**\n\n`VehicleState`\n\nhierarchy - Multi-source position tracking (`PosType::fused`\n\n, `PosType::GNSS`\n\n, `PosType::odom`\n\n)`WaypointFollower`\n\nimplementations - `PurepursuitWaypointFollower`\n\n, `GotoWaypointFollower`\n\n, `MultiWaypointFollower`\n\n`MovementController`\n\n- Direct actuator control (motor, servo)`UbloxRover`\n\n- RTK GNSS with sensor fusion (ZED-F9R)WayWise prioritizes research flexibility. The API evolves continuously to support functional safety and cybersecurity research.\n\nSources: communication/mavsdkvehicleserver.h24-69 communication/vehicleconnections/mavsdkvehicleconnection.h32-114 autopilot/purepursuitwaypointfollower.h42-127 vehicles/vehiclestate.h25-148\n\nWayWise implements a three-tier architecture with dual deployment modes:\n\n**Tier 1: Ground Station (Control Tower Applications)**\n\n**Tier 2: Communication Layer (MAVLink Protocol)**\n\n`mavsdk::Telemetry`\n\n, `mavsdk::Action`\n\n, `mavsdk::Param`\n\n, `mavsdk::MissionRaw`\n\n, `mavsdk::Offboard`\n\n`mavsdk::TelemetryServer`\n\n, `mavsdk::ActionServer`\n\n, `mavsdk::MissionRawServer`\n\n`NAMED_VALUE_FLOAT`\n\n, `POSITION_TARGET_LOCAL_NED`\n\n, `GPS_RTCM_DATA`\n\n**Tier 3: On-Vehicle Systems**\n\n`WaypointFollower`\n\nimplementations`MovementController`\n\n**Mission Upload Sequence** (`appendToRouteOnVehicle`\n\n→ `addRoute`\n\n):\n\nSources: communication/mavsdkvehicleserver.cpp15-124 communication/vehicleconnections/mavsdkvehicleconnection.cpp9-291 autopilot/purepursuitwaypointfollower.cpp88-148\n\n**Position and Control Loop** (autonomous operation):\n\nSources: communication/mavsdkvehicleserver.cpp49-81 autopilot/purepursuitwaypointfollower.cpp183-411 vehicles/vehiclestate.cpp119-133\n\nWayWise organizes code into subsystem directories:\n\n| Directory | Purpose | Key Files |\n|---|---|---|\n`/core` | Data structures and coordinate systems | `pospoint.h/cpp` , `coordinatetransforms.h/cpp` , `geometry.h/cpp` |\n`/communication` | MAVLink and protocol handling | `mavsdkvehicleserver.h/cpp` , `mavsdkvehicleconnection.h/cpp` , `mavsdkstation.h/cpp` , `parameterserver.']"
